{# Heredando la plantilla principal #}


{% extends 'default_layout.html' %}

{% block javascripts %}
 <!-- JS SCRIPT  -->
  <script type="text/JavaScript" src="js/carga-datos-indicadores-educativos.js"></script>
  <script type="text/JavaScript" src="js/main_reportes-indicadores.js"></script>

  <script type="text/JavaScript" src="js/main_graficos_indicadores.js"></script>
  <script type="text/JavaScript" src="js/main_actualizar_indicadores.js"></script>
  <script src="js/Chart.js-2.7.0/dist/Chart.bundle.js"></script>
  <script src="js/Chart.js-2.7.0/samples/utils.js"></script>

<!-- DEINIR EL AJAX START- STOP Y ERROR -->
<script>
  $(document).ready(function () { 
    /*$(document).ajaxStart(function () {
         $('#myModal').modal('show');
     });*/
     $(document).ajaxStop(function () {
         $('#myModal').modal('hide');
     });
     $(document).ajaxError(function () {
         $('#myModal').modal('hide');
     });   
 });
 </script>
  {% endblock %}

{% block contenidos %}
<!-- Page header -->
<!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header p-0">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h4 class="m-0">{{ nombre_institucion }}</h4>
          </div><!-- /.col -->
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="index.php">Home</a></li>
              <li class="breadcrumb-item active">Indicadores</li>
            </ol>
          </div><!-- /.col -->
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->
    
   <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
      <!-- SELECCION DEL AÑO LECTIVO -->
      <form  action="" method="post" name="form" id="form" role="form">
        <fieldset id="ocultos">
          <input type="hidden" id="accion" name="accion" value = "BuscarUser" class="{required:true}">
        </fieldset>
        <div class="row">
          <div class="col-12 col-sm-12 col-md-6 col-lg-5 col-xl-5">
            <!-- / AÑO LECTIVO -->
            <div class="form-group">
                <label class="col-sm-4 col-form-label" for="lstannlectivo">Año Lectivo</label>
                <select id="lstannlectivo" name="lstannlectivo" autofocus class="custom-select" required="required"></select>
            </div>
          </div>
                <!-- / BOTONES -->
                <div class="col-12 col-sm-12 col-md-6 col-lg-7 col-xl-7 align-content-center">
                  <div class="btn-group">
                    <button type="submit" class="btn btn-info" alt="Buscar" id = "goCABuscar">
                      <span class="fal fa-search"></span>
                    </button>
                    <div class="btn-group">
                      <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown">
                         Actualizar
                      </button>
                      <div class="dropdown-menu">
                        <button type="button" class="btn btn-sm btn-secondary" id = "goActualizarRepitentes">
                          <span class="fas fa-sync-alt"></span> Actualizar
                        </button>
                        <button type="button" class="btn btn-sm btn-info" id = "goActualizarNuevoIngreso">
                          <span class="fas fa-sync-alt"></span> Nuevo Ingreso
                        </button>
                        <button type="button" class="btn btn-sm btn-info" id = "goActualizarPN">
                          <span class="fas fa-sync-alt"></span> Partida de Nacimiento
                        </button>
                        <button type="button" class="btn btn-sm btn-info" id = "goVerMemoriaEstadistica">
                          <span class="fas fa-sync-alt"></span> Memoria Estadistica
                        </button>
                        <button type="button" class="btn btn-sm btn-info" id = "goVerSobreEdad">
                          <span class="fas fa-sync-alt"></span> Sobreedad
                        </button>
                        <button type="button" class="btn btn-sm btn-info" id = "goVerIgualNueveFemenino">
                          <span class="fas fa-sync-alt"></span> 9 años Sólo Femenino
                        </button>
                        <button type="button" class="btn btn-sm btn-info" id = "goVerMayorDiezFemenino">
                          <span class="fas fa-sync-alt"></span> Mayor 10 años Sólo Femenino
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
        </div>
      </form>
        <!-- Small boxes (Stat box) -->
        <div class="row">
          <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3">
            <!-- small box -->
            <div class="small-box bg-info">
              <div class="inner">
                <h6 id="totaldeEstudiantes">
                  <label for="totalEstudiantesMasculino"></label> - Masculino
                  <label for="totalEstudiantesFemenino"></label> - Femenino
                </h6>
                <h6><label for="totalEstudiantes"></label> - Estudiantes</h6>
              </div>
              <div class="icon">
                <i class="fas fa-restroom"></i>
              </div>
              <a href="#" class="small-box-footer">Más Detalles <i class="fas fa-arrow-circle-right"></i></a>
            </div>
          </div>
          <!-- ./col -->
          <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3">
            <!-- small box -->
            <div class="small-box bg-success">
              <div class="inner">
                <h3><sup style="font-size: 20px"></sup></h3>

                <p>Personal</p>
              </div>
              <div class="icon">
                <i class="fas fa-user-tie"></i>
              </div>
              <a href="#" class="small-box-footer">Más Detalles <i class="fas fa-arrow-circle-right"></i></a>
            </div>
          </div>
          <!-- ./col -->
          <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3">
            <!-- small box -->
            <div class="small-box bg-warning">
              <div class="inner">
                <h3 id="Familias">
                  <label for="TotalFamilias"></label> 
                </h3>

                <p>Total de Familias</p>
              </div>
              <div class="icon">
                <i class="fas fa-users"></i>
              </div>
              <a href="#" class="small-box-footer"> Más Detalles <i class="fas fa-arrow-circle-right"></i></a>
            </div>
          </div>
          <!-- ./col -->
          <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3">
            <!-- small box -->
            <div class="small-box bg-danger">
              <div class="inner">
                <h6 id="Docentes">
                  <label for="totalDocentesMasculino"></label> - Masculino
                  <label for="totalDocentesFemenino"></label> - Femenino
                </h6>
                <h6><label for="totalDocentes"></label> - Docentes</h6>
                <p>Total Docentes</p>
              </div>
              <div class="icon">
                <i class="fas fa-chalkboard-teacher"></i>
              </div>
              <a href="#" class="small-box-footer"> Más Detalles <i class="fas fa-arrow-circle-right"></i></a>
            </div>
          </div>
          <!-- ./col -->
        </div>
        <!-- /.row -->
      </div>
    </section>

    <!-- GRAFICOS  y TABLA-->  
    <section style="display: none;">
      <div class="row">
            <!-- GRAFICOS -->
        <div class="col col-md-6 col-lg-6 col-xl-6">
          <div class="jumbotron">
            <h2>Matrícula Máxima y Retirados</h2>
                <button type="button" class="btn btn-primary">
                  Masculino <span class="badge badge-light" id="MatriculaMasculino">0</span>
                </button>
                <button type="button" class="btn btn-danger">
                  Femenino <span class="badge badge-light" id="MatriculaFemenino">0</span>
                </button>
                <button type="button" class="btn btn-success">
                  Total <span class="badge badge-light" id="MatriculaTotal">0</span>
                </button>
           <div>
             <canvas id="GraficoMatricula" height="300px"></canvas>    
          </div>
        </div>
        </div>
       <!-- TABLA DE INDICADORES -->
          <div class="col col-md-6 col-lg-6 col-xl-6">
            <div class="jumbotron">
              <h2>Matricula</h2>
              <table class="table table-striped table-sm" id="listadoMatricula">     
                <thead>     
                  <tr>     
                    <th>N°</th>     
                    <th>Modalidad</th>     
                    <th>Turno</th>     
                    <th>Masculino</th>     
                    <th>Femenino</th>     
                    <th>Total</th>     
                  </tr>                         
                </thead>     
                <tbody id="listaMatricula">     
                      
                </tbody>     
              </table>             
            </div>
          </div>
       </div>
    </section>
  </div> <!-- /.content-Wrapper, Contains page content. -->
<!-- Modal VENTANA EN ESPERA.-->
<div id="myModal" class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="static" 
  data-keyboard="false">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel"><label for="VerificarActualizar">Actualizando...</label></h5>
      </div>
      <div class="modal-body">
        <div class="d-flex justify-content-center mb-3">
          <img src="img/ajax-loader.gif" width="45" height="45" alt="Loading...">
        </div>
      </div>
      <div class="modal-footer">
        <label for="NombreArchivo"></label>
      </div>
    </div>
  </div>
</div>  
  {% endblock %}

{% block loginUser %}
<!--	{% include 'layout-login-user.html' %} -->
{% endblock %}